actor Unauthorized User #lightgreen
participant WebApp
database mychirp.db #red
participant Identity

activate Unauthorized User

messagestyle <background:#white>
// Start with getting HTTPS
Unauthorized User ->  WebApp: HTTP Request 
activate WebApp
Unauthorized User <<-- WebApp: Redirect to HTTPS
deactivateafter WebApp
Unauthorized User ->  WebApp: HTTPS Request
activate WebApp

// Check authorization
WebApp -> Identity: Is Authorized?
activate Identity
WebApp <<-- Identity: Return not authorized
deactivateafter Identity

// Get Cheeps from database
WebApp  ->  mychirp.db: Get cheeps of page
activate mychirp.db
WebApp  <<-- mychirp.db: Return cheeps
deactivateafter mychirp.db

// Send page to user
Unauthorized User <<-- WebApp: Return page
deactivateafter WebApp